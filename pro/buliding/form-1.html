<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1.0 , user-scalable=no">

    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/index.css">
        
</head>
<body>
    <div class="main building-form form-1">
        <!-- 导航 -->
        <div class="container navBox">
            <div class="navbar navbar-default" role="navigation">
                <div class="navbar-header">
                        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                        <span class="sr-only">Toggle Navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        </button>
                        <a href="#" class="navbar-brand logo"><img src="img/logo-w.png" alt=""></a>
                </div>
                <div class="collapse navbar-collapse navbar-responsive-collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li class="active"><a href="form-1.html">List your space</a></li>
                        <li><a href="form-2.html">Enquir</a></li>
                        <li><a href="office-list.html">Office</a></li>
                        <li><a href="store-list.html">Shop</a></li>
                        <li><a href="form-1.html">Transaction</a></li>
                        <li><a href="news.html">News</a></li>
                    </ul>
                </div>
                <ul class="language hidden-xs">
                    <li><a href="#">中文</a></li>
                    <li><a href="#">繁体</a></li>
                    <li><a href="#">English</a></li>
                </ul>
            </div>
        </div>

        <!-- 主体 -->
        <div class="bgWrap">
            <div class="content container">
                <div class="wbox">
                    <div class="title">
                        <h2>免费委托放盘<a class="visible-xs" href="index.html">返回首页</a></h2>
                        <p>寻找专业地产代理？立即行动,宏信物业为你提供最专业,最贴心的地产代理服务</p>
                    </div>
                    <ul>
                        <li>
                            <img src="img/icon-3-01.png" alt="">
                            <p>提交闲置房源</p>
                            <i></i>
                        </li>
                        <li>
                            <img src="img/icon-3-02.png" alt="">
                            <p>采集房源信息</p>
                            <i></i>
                        </li>
                        <li>
                            <img src="img/icon-3-03.png" alt="">
                            <p>官网曝光房源</p>
                            <i></i>
                        </li>
                        <li>
                            <img src="img/icon-3-04.png" alt="">
                            <p>成交房源</p>
                        </li>
                    </ul>

                    <!-- 输入框列表 -->
                    <div class="item">
                        <div class="txF">
                            <div class="item-inp">
                                <span>楼盘名称</span>
                                <input type="text" maxlength="10" class="buildingName checkTx">
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <div class="drop">
                                    <select name="buildingRegion">
                                        <option>区域</option>
                                        <option>香港</option>
                                        <option>九龙</option>
                                    </select>
                                </div>
                                <span style="display:none">地址</span>
                                <input type="text" maxlength="10" class="buildingAddress checkTx" placeholder="详细地址">
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>面积</span>
                                <input type="number" oninput="if(value.length>8)value=value.slice(0,8)" class="buildingSize checkTx" >
                                <p>平方尺</p>
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>租金</span>
                                <input type="number" oninput="if(value.length>8)value=value.slice(0,8)" class="buildingRent checkTx">
                                <p>港币/月</p>
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>卖价</span>
                                <input type="number" oninput="if(value.length>8)value=value.slice(0,8)" class="buildingPrice checkTx">
                                <p>港币</p>
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>联系人姓名</span>
                                <input type="text" maxlength="10" class="userName checkTx">
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>联系人手机号</span>
                                <input oninput="if(value.length>15)value=value.slice(0,15)" class="userPhone checkTx" type="text">
                                <strong></strong>
                            </div>
                            <div class="item-inp">
                                <span>验证码</span>
                                <input type="number" oninput="if(value.length>10)value=value.slice(0,10)" class="codeInp checkTx">
                                <button class="code">获取验证码</button>
                                <strong></strong>
                            </div>
                        </div>
                        <div class="subF">
                            <input class="check" type="submit" value="提交房源">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 计算机 -->
        <div class="computer-btn" id="barrage">
            <div class="computer">
                <div class="computer-mask"></div>
                <div class="box">
                    <div class="title">
                        <h3>按揭计算机</h3>
                        <span class="close">X</span>
                    </div>
                    <div class="content">
                        <div>
                            <span>楼价($)</span>
                            <input type="text">
                        </div>
                        <div>
                            <span>按揭成数($)</span>
                            <input type="text">
                        </div>
                        <div>
                            <span>利率($)</span>
                            <input type="text">
                        </div>
                        <div>
                            <span>返还年期($)</span>
                            <input type="text">
                        </div>
                        <button>计算</button>
                        <div>
                            <span>首期($)</span>
                            <input type="text">
                        </div>
                        <div>
                            <span>每月还款($)</span>
                            <input type="text">
                        </div>
                    </div>
                </div>
            </div> 
        </div>

        <!-- footer -->
        <footer class="container-fluid foot-wrap">
                <!--采用container，使得页尾内容居中 -->
            <div class="container">
                <ul class="col-md-8 col-md-offset-2">
                    <li>
                        <a href="#">Entrust a hoouse</a>
                    </li>
                    <li>
                        <a href="#">Real estate rental</a>
                    </li>
                    <li>
                        <a href="#">Shop lease</a>
                    </li>
                    <li>
                        <a href="#">News</a>
                    </li>
                    <li>
                        <a href="#">About us</a>
                    </li>
                </ul>
            </div>      
        </footer>
    </div>
</body>
<script>

    $(function(){
        var countdown = 59;//倒计时
        var pwdReg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;//密码，8到16位数字与字母组合
        var phoneReg = /^[1][3,4,5,7,8][0-9]{9}$/;//手机号
        var check = $('.check');
        var code = $('.code');
        var myInput = {
            bName:$('.buildingName'),      
            bAddress:$('.buildingAddress'),
            bSize:$('.buildingSize'),      
            bRent:$('.buildingRent'),      
            bPrice:$('.buildingPrice'),    
            uName:$('.userName'),          
            uPhone:$('.userPhone'),        
            codeInp:$('.codeInp'),         
        }


        //验证
        //提交
        function checkInput(){
            $('.checkTx').each(function(i){
                if( $(this).val() == "" ){
                    $(this).attr('check','off')
                    $(this).siblings('strong').html( "请输入" +  $(this).prev().html()  );
                }else if( $(this).hasClass('userPhone') ){
                    if( !phoneReg.test( $(this).val() )  ){
                        $(this).attr('check','off')
                        $(this).siblings('strong').html( "请输入正确的手机号码" )
                    }else{
                        $(this).attr('check','on')
                        $(this).siblings('strong').html( '' )
                    }
                }else if( $(this).hasClass('buildingAddress') ){
                    if( $(this).siblings('.drop').find('select').val() == "区域"  ){
                        $(this).attr('check','off')
                        $(this).siblings('strong').html( "请选择左侧的区域" )
                    }else{
                        $(this).attr('check','on')
                        $(this).siblings('strong').html( '' )
                    }
                }else{
                    $(this).attr('check','on')
                    $(this).siblings('strong').html('');
                }
            })
        }
        check.click(function(){
            
            checkInput();
            var b = true;
            $('.checkTx').each(function(i){
                if( $(this).attr('check') == 'off'  ){
                    b = false;
                }
            })
            if (b) {
                console.log(                
                    myInput.bName.val(),    //楼盘名称
                    myInput.bAddress.val(), //区域/地址
                    myInput.bSize.val(),    //面积
                    myInput.bRent.val(),    //租金
                    myInput.bPrice.val(),   //卖价
                    myInput.uName.val(),    //联系人姓名
                    myInput.uPhone.val(),   //联系人手机号
                    myInput.codeInp.val()   //手机验证码
                )
                //通过
                // ajax({
                //     url: myUrl,
                //     type: 'get',
                //     dataType: 'json',
                //     success: function (data, status) {
                //         console.log(data)
                //     }
                // })  
            }

        })

        // //提交
        // check.click(function(){
        //     $('.checkTx').each(function(i,v){
        //         if( $(this).val() == ""){
        //             $(this).attr('check','off')
        //             $(this).siblings('strong').html( "请输入" +  $(this).prev().html()  )
        //         }else{
        //             $(this).siblings('strong').html('')
        //             if( $('.checkTx').siblings('strong').html() == '' ){
        //                 alert("通过，提交ajax");
        //                 console.log(                
        //                     myInput.bName.val(),    //楼盘名称
        //                     myInput.bAddress.val(), //区域/地址
        //                     myInput.bSize.val(),    //面积
        //                     myInput.bRent.val(),    //租金
        //                     myInput.bPrice.val(),   //卖价
        //                     myInput.uName.val(),    //联系人姓名
        //                     myInput.uPhone.val(),   //联系人手机号
        //                     myInput.codeInp.val()   //手机验证码
        //                 )
        //                 //通过
        //                 // ajax({
        //                 //     url: myUrl,
        //                 //     type: 'get',
        //                 //     dataType: 'json',
        //                 //     success: function (data, status) {
        //                 //         console.log(data)
        //                 //     }
        //                 // })  
        //             }  
                    
        //         }
        //         // else if( $(this).hasClass('userPhone') ){
        //         //     if( !phoneReg.test( $(this).val() )  ){
        //         //         $(this).siblings('strong').html( "请输入正确的手机号码" )
                        
        //         //     }else{
        //         //         $(this).siblings('strong').html( "" )
        //         //     }
        //         // }else if( $(this).hasClass('buildingAddress') ){
        //         //     if( $(this).siblings('.drop').find('select').val() == "区域"  ){
        //         //         $(this).siblings('strong').html( "请选择左侧的区域" )
                        
        //         //     }else{
        //         //         $(this).siblings('strong').html( "" )
        //         //     }
        //         // }

        //     })
        // })

        //发送手机验证码
        code.click(function(){
            if ( myInput.uPhone.val() == "") {
                myInput.uPhone.siblings( 'strong' ).html("请输入您的手机号码")
                return false;
            }else if( !phoneReg.test( myInput.uPhone.val() ) ){
                myInput.uPhone.siblings( 'strong' ).html("请输入有效的11位手机号码")
            }else{
                myInput.uPhone.siblings( 'strong' ).html("")
                alert("已发送验证码到您的手机")
                settime(code);
                //通过 发送验证码到手机
                // ajax({
                //     url: myUrl,
                //     type: 'get',
                //     dataType: 'json',
                //     success: function (data, status) {
                //         console.log(data)
                //     }
                // })  
            }  
        })

        //验证码请求倒计时
        function settime(obj) { 
            if (countdown == 0) { 
                
                obj.removeAttr("disabled");  
                obj.html("获取");
                obj.removeClass("active");
                countdown = 60; 
                return;
            } else { 

                obj.attr("disabled", true); 
                obj.html(countdown);
                obj.addClass("active");
                countdown--; 
            } 
            setTimeout(function() { 
                settime(obj) }
            ,1000) 
        }



        // 计算机右下角弹窗
        $('.computer-btn').click(function(even){
            event.preventDefault();
            $(this).find('.computer').css('display') == "none"? $(this).find('.computer').show() : $(this).find('.computer').hide();
            $(this).find('.box').css('display') == "none"? $(this).find('.box').show() : $(this).find('.box').hide();
            if( $(window).width() < 768 ){
                $('.computer-mask').show().css('left',0)
            }
        })
        $('.computer-btn .box').click(function(even){
            event.stopPropagation(); 
        })
        $('.close').click(function(even)
        {   
            $('.computer').hide();
            $('.box').hide();
        })
        $('.computer-mask').height( $(document).height() );
    })
</script>
</html>